@model USER_QUANLYPHONGTRO.Models.Dtos.Rooms.PhongDto

@{
    ViewBag.Title = Model != null ? Model.TieuDe : "Chi tiết phòng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles {
    <style>
        .room-detail-container {
            padding: 40px 0;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .breadcrumb {
            margin-bottom: 30px;
            padding: 10px 0;
        }
        
        .breadcrumb a {
            color: #007bff;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .room-header {
            margin-bottom: 30px;
        }
        
        .room-header h1 {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .room-meta {
            display: flex;
            gap: 20px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .room-rating {
            color: #f39c12;
        }
        
        .room-images {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 500px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 8em;
            margin-bottom: 40px;
        }
        
        .room-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
        }
        
        .main-info {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .info-section {
            margin-bottom: 30px;
        }
        
        .info-section h2 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }
        
        .highlight-box {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .highlight-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .highlight-item i {
            font-size: 2em;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .highlight-item .label {
            color: #666;
            font-size: 0.9em;
        }
        
        .highlight-item .value {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-top: 5px;
        }
        
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .amenity-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 5px;
        }
        
        .amenity-item i {
            color: #1976d2;
        }
        
        .sidebar {
            position: sticky;
            top: 20px;
        }
        
        .price-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .price-box .price {
            font-size: 2.5em;
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 5px;
        }
        
        .price-box .period {
            color: #666;
            margin-bottom: 20px;
        }
        
        .price-detail {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .contact-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .contact-box h3 {
            margin-bottom: 20px;
        }
        
        .login-prompt {
            text-align: center;
            padding: 30px;
            background: #fff3cd;
            border-radius: 10px;
        }
        
        .login-prompt i {
            font-size: 3em;
            color: #856404;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-full {
            width: 100%;
            display: block;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
            color: white;
            text-decoration: none;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            color: white;
            text-decoration: none;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #333;
        }
        
        .btn-warning:hover {
            background: #e0a800;
            text-decoration: none;
        }
        
        .contact-info {
            margin: 15px 0;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .contact-item i {
            color: #007bff;
            font-size: 1.3em;
        }
    </style>
}

<div class="room-detail-container">
    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <a href="@Url.Action("Index", "Guest")">
            <i class="fa fa-home"></i> Trang chủ
        </a>
        <span> / </span>
        <span>Chi tiết phòng</span>
    </div>

    @if (Model != null)
    {
        <!-- Room Header -->
        <div class="room-header">
            <h1>@Model.TieuDe</h1>
            <div class="room-meta">
                @if (Model.DiemTrungBinh.HasValue && Model.DiemTrungBinh > 0)
                {
                    <div class="room-rating">
                        @for (int i = 0; i < Math.Floor(Model.DiemTrungBinh.Value); i++)
                        {
                            <i class="fa fa-star"></i>
                        }
                        <span>@Model.DiemTrungBinh.Value.ToString("0.0") (@Model.SoLuongDanhGia đánh giá)</span>
                    </div>
                }
                @if (Model.NhaTro != null)
                {
                    <div>
                        <i class="fa fa-map-marker"></i> @Model.NhaTro.DiaChi
                    </div>
                }
                <div>
                    <i class="fa fa-calendar"></i> Đăng ngày @Model.CreatedAt.ToString("dd/MM/yyyy")
                </div>
            </div>
        </div>

        <!-- Room Images -->
        <div class="room-images">
            <i class="fa fa-camera"></i>
        </div>

        <!-- Room Content -->
        <div class="room-content">
            <!-- Main Info -->
            <div class="main-info">
                <!-- Highlights -->
                <div class="info-section">
                    <h2>Thông Tin Nổi Bật</h2>
                    <div class="highlight-box">
                        <div class="highlight-item">
                            <i class="fa fa-dollar"></i>
                            <div class="label">Giá thuê</div>
                            <div class="value">@Model.GiaTien.ToString("N0")đ</div>
                        </div>
                        <div class="highlight-item">
                            <i class="fa fa-arrows-alt"></i>
                            <div class="label">Diện tích</div>
                            <div class="value">@(Model.DienTich?.ToString() ?? "N/A") m²</div>
                        </div>
                        <div class="highlight-item">
                            <i class="fa fa-users"></i>
                            <div class="label">Số người tối đa</div>
                            <div class="value">@Model.SoNguoiToiDa người</div>
                        </div>
                        <div class="highlight-item">
                            <i class="fa fa-money"></i>
                            <div class="label">Tiền cọc</div>
                            <div class="value">@(Model.TienCoc.HasValue ? Model.TienCoc.Value.ToString("N0") + "đ" : "Thỏa thuận")</div>
                        </div>
                    </div>
                </div>

                <!-- Amenities -->
                @if (Model.TienIchList != null && Model.TienIchList.Any())
                {
                    <div class="info-section">
                        <h2>Tiện Ích</h2>
                        <div class="amenities-grid">
                            @foreach (var amenity in Model.TienIchList)
                            {
                                <div class="amenity-item">
                                    <i class="fa fa-check-circle"></i>
                                    <span>@amenity.Ten</span>
                                </div>
                            }
                        </div>
                    </div>
                }

                <!-- Property Info -->
                @if (Model.NhaTro != null)
                {
                    <div class="info-section">
                        <h2>Thông Tin Nhà Trọ</h2>
                        <div class="contact-item">
                            <i class="fa fa-building"></i>
                            <div>
                                <strong>@Model.NhaTro.TieuDe</strong><br />
                                <span style="color: #666;">@Model.NhaTro.DiaChi</span>
                            </div>
                        </div>
                    </div>
                }

                <!-- Additional Info -->
                <div class="info-section">
                    <h2>Thông Tin Khác</h2>
                    <div class="contact-item">
                        <i class="fa fa-info-circle"></i>
                        <div>
                            <strong>Trạng thái:</strong> @Model.TrangThai
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fa fa-check"></i>
                        <div>
                            <strong>Đã duyệt:</strong> @(Model.IsDuyet ? "Có" : "Chưa")
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Price Box -->
                <div class="price-box">
                    <div class="price">@Model.GiaTien.ToString("N0")đ</div>
                    <div class="period">/ tháng</div>
                    
                    @if (Model.TienCoc.HasValue)
                    {
                        <div class="price-detail">
                            <span>Tiền cọc:</span>
                            <strong>@Model.TienCoc.Value.ToString("N0")đ</strong>
                        </div>
                    }
                </div>

                <!-- Contact Box -->
                <div class="contact-box">
                    <h3>Thông Tin Liên Hệ</h3>
                    
                    @if (ViewBag.ShowContactPrompt == true)
                    {
                        <!-- Guest - Cần đăng nhập -->
                        <div class="login-prompt">
                            <i class="fa fa-lock"></i>
                            <p>@ViewBag.ContactMessage</p>
                            <a href="@Url.Action("Login", "Auth", new { type = "nguoithue" })" class="btn btn-primary btn-full">
                                <i class="fa fa-sign-in"></i> Đăng Nhập
                            </a>
                            <p style="margin-top: 15px; font-size: 0.9em;">
                                Chưa có tài khoản? 
                                <a href="@Url.Action("NguoiThue_Register", "Auth")">Đăng ký ngay</a>
                            </p>
                        </div>
                    }
                    else
                    {
                        <!-- Logged In - Hiển thị thông tin -->
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fa fa-phone"></i>
                                <div>
                                    <strong>Hotline:</strong><br />
                                    <span>091234567</span>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="fa fa-envelope"></i>
                                <div>
                                    <strong>Email:</strong><br />
                                    <span>contact@example.com</span>
                                </div>
                            </div>
                        </div>
                        
                        <a href="#" class="btn btn-success btn-full" style="margin-top: 15px;">
                            <i class="fa fa-calendar"></i> Đặt Lịch Xem Phòng
                        </a>
                    }
                </div>
            </div>
        </div>
    }
    else
    {
        <div style="text-align: center; padding: 60px 20px;">
            <i class="fa fa-exclamation-triangle" style="font-size: 5em; color: #ddd;"></i>
            <h2>Không tìm thấy thông tin phòng</h2>
            <a href="@Url.Action("Index", "Guest")" class="btn btn-primary">Quay lại danh sách</a>
        </div>
    }
</div>

@section scripts {
    <script>
        // Add any interactive features here
        console.log('Room detail page loaded');
    </script>
}
