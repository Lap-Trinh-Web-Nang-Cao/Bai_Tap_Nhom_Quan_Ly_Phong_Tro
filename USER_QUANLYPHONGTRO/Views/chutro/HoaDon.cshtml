@model IEnumerable<USER_QUANLYPHONGTRO.Models.ViewModels.ChuTro.LandlordHoaDonViewModel>

@{
    Layout = "~/Views/Shared/_ChutroLayout.cshtml";
    ViewBag.Title = "Quản lý hóa đơn";
}

<div class="dashboard-container">
    <div class="dashboard-header">
        <h1 class="page-title">Hóa đơn & Thu tiền</h1>
    </div>

    <div class="activity-card">
        <div class="table-responsive">
            <table class="table" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="text-align: left; border-bottom: 1px solid #eee; color: #888;">
                        <th style="padding: 15px;">MÃ BL</th>
                        <th>PHÒNG</th>
                        <th>NGƯỜI ĐÓNG</th>
                        <th>SỐ TIỀN</th>
                        <th>NGÀY NỘP</th>
                        <th>MINH CHỨNG</th>
                        <th>TRẠNG THÁI</th>
                        <th>HÀNH ĐỘNG</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null)
                    {
                        foreach (var item in Model)
                        {
                            <tr style="border-bottom: 1px solid #f5f5f5;">
                                <td style="padding: 15px; color: #666;">
                                    #@(item.SoBienLai ?? "---")
                                </td>
                                <td style="font-weight: bold;">@item.TenPhong</td>
                                <td>@item.NguoiTai</td>
                                <td style="font-weight: bold; color: #e74c3c;">
                                    @((item.SoTien ?? 0).ToString("N0"))đ
                                </td>
                                <td>
                                    @(item.ThoiGianTai.HasValue ? item.ThoiGianTai.Value.ToString("dd/MM/yyyy HH:mm") : "-")
                                </td>
                                <td>
                                    @if (!string.IsNullOrEmpty(item.DuongDanAnh))
                                    {
                                        <a href="@item.DuongDanAnh" target="_blank" class="btn-action" style="text-decoration: none;">
                                            <span class="material-icons" style="font-size: 14px; vertical-align: middle;">image</span> Xem
                                        </a>
                                    }
                                    else
                                    {
                                        <span style="color: #ccc;">Chưa có</span>
                                    }
                                </td>
                                <td>
                                    @if (item.DaXacNhan)
                                    {
                                        <span class="status-badge status-confirmed">Đã xác nhận</span>
                                    }
                                    else
                                    {
                                        <span class="status-badge status-pending">Chờ duyệt</span>
                                    }
                                </td>
                                <td>
                                    @if (!item.DaXacNhan)
                                    {
                                        using (Html.BeginForm("XacNhanThanhToan", "ChuTro", new { id = item.BienLaiId }, FormMethod.Post))
                                        {
                                            <button class="btn-view-all" style="padding: 5px 10px; font-size: 0.8rem; background-color: var(--primary-color, #4e73df); color: white; border: none; cursor: pointer;">Duyệt</button>
                                        }
                                    }
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>