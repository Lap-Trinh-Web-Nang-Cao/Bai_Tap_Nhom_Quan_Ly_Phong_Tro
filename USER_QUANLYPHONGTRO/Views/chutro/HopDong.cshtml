@model USER_QUANLYPHONGTRO.Models.ViewModels.ChuTro.LandlordHopDongViewModel

@{
    ViewBag.Title = "Quản lý hợp đồng";
    Layout = "~/Views/Shared/_ChutroLayout.cshtml";
}

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Inter', sans-serif;
        background-color: #f8f9fc;
    }

    /* Header & Filter */
    .page-header-contract {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        flex-wrap: wrap;
        gap: 15px;
    }

    .header-title h2 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 700;
        color: #2e384d;
    }

    .header-title p {
        margin: 5px 0 0;
        color: #858796;
        font-size: 0.9rem;
    }

    .filter-bar {
        background: white;
        padding: 5px;
        border-radius: 10px;
        display: flex;
        gap: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.02);
    }

    .filter-btn {
        border: none;
        background: transparent;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 600;
        color: #858796;
        cursor: pointer;
        transition: all 0.2s;
    }

        .filter-btn.active {
            background: #eef2f7;
            color: #4e73df;
        }

        .filter-btn:hover:not(.active) {
            background: #f8f9fc;
            color: #4e73df;
        }

    /* Contract List Styling */
    .contract-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .contract-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 3px 10px rgba(0,0,0,0.02);
        border: 1px solid #f1f3f9;
        transition: transform 0.2s, box-shadow 0.2s;
        flex-wrap: wrap;
        gap: 15px;
    }

        .contract-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.06);
            border-color: #e3e6f0;
        }

    /* Info Columns */
    .info-col {
        display: flex;
        flex-direction: column;
        min-width: 120px;
    }

    .info-label {
        font-size: 0.75rem;
        color: #a0aec0;
        text-transform: uppercase;
        font-weight: 600;
        margin-bottom: 4px;
    }

    .info-value {
        font-size: 0.95rem;
        color: #2d3748;
        font-weight: 600;
    }

        .info-value.highlight {
            color: #4e73df;
        }

    /* User Info */
    .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 200px;
    }

    .user-avatar {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.2rem;
    }

    /* Status Badge */
    .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 700;
        display: inline-flex;
        align-items: center;
        gap: 5px;
    }

    .status-active {
        background: #def7ec;
        color: #03543f;
    }
    /* Xanh lá */
    .status-expired {
        background: #fde8e8;
        color: #9b1c1c;
    }
    /* Đỏ */
    .status-warning {
        background: #feecdc;
        color: #9c4221;
    }
    /* Cam */

    /* Action Buttons */
    .action-group {
        display: flex;
        gap: 10px;
    }

    .btn-icon {
        width: 35px;
        height: 35px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #e2e8f0;
        background: white;
        color: #718096;
        transition: 0.2s;
        text-decoration: none;
    }

        .btn-icon:hover {
            background: #edf2f7;
            color: #2d3748;
        }

    .btn-primary-soft {
        background: rgba(66, 153, 225, 0.1);
        color: #4299e1;
        padding: 8px 16px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.9rem;
        text-decoration: none;
        transition: 0.2s;
    }

        .btn-primary-soft:hover {
            background: #4299e1;
            color: white;
            text-decoration: none;
        }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: 12px;
        border: 1px dashed #e2e8f0;
    }

    /* Responsive adjustments */
    @@media (max-width: 768px) {
        .contract-card {
            flex-direction: column;
            align-items: flex-start;
        }

        .info-col {
            width: 100%;
            flex-direction: row;
            justify-content: space-between;
            border-bottom: 1px solid #f7fafc;
            padding-bottom: 10px;
        }

        .action-group {
            width: 100%;
            justify-content: flex-end;
            margin-top: 10px;
        }
    }
</style>

<div class="container-fluid">
    <div class="page-header-contract">
        <div class="header-title">
            <h2>Hợp đồng khách thuê</h2>
            <p>Quản lý hồ sơ và thời hạn thuê phòng.</p>
        </div>

        <div style="display: flex; gap: 15px;">
            <div class="filter-bar">
                <button class="filter-btn active">Tất cả</button>
                <button class="filter-btn">Hiệu lực</button>
                <button class="filter-btn">Hết hạn</button>
            </div>
            <a href="#" class="btn btn-primary" style="background: #4e73df; border:none; border-radius: 10px; padding: 10px 20px; display:flex; align-items:center; gap:5px; text-decoration:none;">
                <i class="fas fa-plus"></i> <span style="font-weight:600;">Tạo mới</span>
            </a>
        </div>
    </div>

    <div class="contract-list">
        @if (Model != null && Model.HopDongList != null && Model.HopDongList.Any())
        {
            foreach (var item in Model.HopDongList)
            {
                <div class="contract-card">
                    <div class="user-info">
                        <div class="user-avatar">
                            @(item.TenKhachThue != null && item.TenKhachThue.Length > 0 ? item.TenKhachThue.Substring(0,1) : "K")
                        </div>
                        <div class="info-col">
                            <span class="info-value">@item.TenKhachThue</span>
                            <span class="info-label" style="margin:0; font-size:0.7rem;">Khách thuê</span>
                        </div>
                    </div>

                    <div class="info-col">
                        <span class="info-label">Phòng thuê</span>
                        <span class="info-value highlight"><i class="fas fa-door-open" style="margin-right:5px; font-size:0.8rem;"></i>@item.TenPhong</span>
                    </div>

                    <div class="info-col">
                        <span class="info-label">Thời hạn hợp đồng</span>
                        <div style="font-size:0.9rem; color:#4a5568;">
                            @item.NgayBatDau.ToString("dd/MM/yy") <i class="fas fa-arrow-right" style="font-size:0.7rem; margin:0 5px; color:#cbd5e0;"></i>
                            @(item.NgayKetThuc.HasValue ? item.NgayKetThuc.Value.ToString("dd/MM/yy") : "Vô thời hạn")
                        </div>
                    </div>

                    <div class="info-col">
                        <span class="info-label">Giá trị</span>
                        <span class="info-value">@item.GiaThue.ToString("N0")đ</span>
                    </div>

                    <div class="info-col">
                        @if (item.NgayKetThuc.HasValue && item.NgayKetThuc.Value < DateTime.Now)
                        {
                            <span class="status-badge status-expired"><span style="width:6px; height:6px; background:currentColor; border-radius:50%;"></span> Hết hạn</span>
                        }
                        else
                        {
                            <span class="status-badge status-active"><span style="width:6px; height:6px; background:currentColor; border-radius:50%;"></span> Hiệu lực</span>
                        }
                    </div>

                    <div class="action-group">
                        <a href="#" class="btn-icon" title="Tải xuống PDF"><i class="fas fa-download"></i></a>
                        <a href="#" class="btn-icon" title="Chỉnh sửa"><i class="fas fa-pen"></i></a>
                        <a href="#" class="btn-primary-soft">Chi tiết</a>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="empty-state">
                <img src="https://cdn-icons-png.flaticon.com/512/7486/7486754.png" width="80" style="opacity:0.5; margin-bottom:15px;">
                <h4 style="color:#2d3748; font-weight:700;">Chưa có hợp đồng nào</h4>
                <p style="color:#718096; margin-bottom:20px;">Bạn chưa tạo hợp đồng thuê phòng nào. Hãy bắt đầu ngay!</p>
                <a href="#" class="btn btn-primary" style="background:#4e73df; border:none; padding:10px 25px; border-radius:8px;">Tạo hợp đồng đầu tiên</a>
            </div>
        }
    </div>
</div>